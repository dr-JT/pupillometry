<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Preprocess pupil data using this single function — pupil_preprocess • pupillometry</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Preprocess pupil data using this single function — pupil_preprocess" />
<meta property="og:description" content="This function will perform preprocessing on an entire folder of data files.
It takes as input a specified folder path and outputs the
preprocessed data to a specified folder path. For more details, see:
https://dr-jt.github.io/pupillometry/articles/pupil_preprocess.html" />
<meta property="og:image" content="https://dr-jt.github.io/pupillometry/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pupillometry</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="divider"></li>
    <li class="dropdown-header">How To</li>
    <li>
      <a href="../articles/pupil_preprocess.html">Use pupil_preprocess()</a>
    </li>
    <li>
      <a href="../articles/gui.html">Use the GUI</a>
    </li>
    <li>
      <a href="../articles/pupillometry_functions.html">Build Your Own Sequence of Pupillometry Functions</a>
    </li>
    <li>
      <a href="../articles/message_markers.html">Use Message Markers</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Example Data Sets</li>
    <li>
      <a href="../articles/example_data.html">Example Data Set</a>
    </li>
    <li>
      <a href="../articles/example_data_w_out_messages.html">What if My Data Doesn't Have Message Markers?</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">More Details</li>
    <li>
      <a href="../articles/preprocessing_options.html">Preprocessing Options</a>
    </li>
    <li>
      <a href="../articles/smooth_interpolate_first.html">Smooth or Interpolation First?</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dr-JT/pupillometry/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Preprocess pupil data using this single function</h1>
    <small class="dont-index">Source: <a href='https://github.com/dr-JT/pupillometry/blob/master/R/pupil_preprocess.R'><code>R/pupil_preprocess.R</code></a></small>
    <div class="hidden name"><code>pupil_preprocess.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function will perform preprocessing on an entire folder of data files.
It takes as input a specified folder path and outputs the
preprocessed data to a specified folder path. For more details, see:
https://dr-jt.github.io/pupillometry/articles/pupil_preprocess.html</p>
    </div>

    <pre class="usage"><span class='fu'>pupil_preprocess</span><span class='op'>(</span>
  import_dir <span class='op'>=</span> <span class='cn'>NULL</span>,
  pattern <span class='op'>=</span> <span class='st'>".txt"</span>,
  taskname <span class='op'>=</span> <span class='cn'>NULL</span>,
  subj_prefix <span class='op'>=</span> <span class='cn'>NULL</span>,
  subj_suffix <span class='op'>=</span> <span class='cn'>NULL</span>,
  timing_file <span class='op'>=</span> <span class='cn'>NULL</span>,
  output_dir <span class='op'>=</span> <span class='cn'>NULL</span>,
  output_steps <span class='op'>=</span> <span class='cn'>FALSE</span>,
  eyetracker <span class='op'>=</span> <span class='cn'>NULL</span>,
  hz <span class='op'>=</span> <span class='cn'>NULL</span>,
  eye_use <span class='op'>=</span> <span class='cn'>NULL</span>,
  px_to_mm.conversion <span class='op'>=</span> <span class='cn'>NULL</span>,
  start_tracking.message <span class='op'>=</span> <span class='st'>"default"</span>,
  start_tracking.match <span class='op'>=</span> <span class='st'>"exact"</span>,
  trial_onset.message <span class='op'>=</span> <span class='cn'>NULL</span>,
  trial_onset.match <span class='op'>=</span> <span class='st'>"exact"</span>,
  deblink_extend <span class='op'>=</span> <span class='fl'>0</span>,
  pretrial.duration <span class='op'>=</span> <span class='cn'>NULL</span>,
  missing_allowed <span class='op'>=</span> <span class='fl'>1</span>,
  interpolate <span class='op'>=</span> <span class='cn'>NULL</span>,
  interpolate.maxgap <span class='op'>=</span> <span class='cn'>Inf</span>,
  smooth <span class='op'>=</span> <span class='cn'>NULL</span>,
  smooth.window <span class='op'>=</span> <span class='fl'>5</span>,
  method_first <span class='op'>=</span> <span class='cn'>NULL</span>,
  bc <span class='op'>=</span> <span class='cn'>NULL</span>,
  pre_bc.duration <span class='op'>=</span> <span class='cn'>NULL</span>,
  bc_onset.message <span class='op'>=</span> <span class='cn'>NULL</span>,
  bc_onset.match <span class='op'>=</span> <span class='st'>"exact"</span>,
  include_col <span class='op'>=</span> <span class='cn'>NULL</span>,
  trial_exclude <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>)</span>,
  files_merge <span class='op'>=</span> <span class='cn'>FALSE</span>,
  starttracking.message <span class='op'>=</span> <span class='cn'>NULL</span>,
  starttracking.match <span class='op'>=</span> <span class='cn'>NULL</span>,
  trialonset.message <span class='op'>=</span> <span class='cn'>NULL</span>,
  trialonset.match <span class='op'>=</span> <span class='cn'>NULL</span>,
  pre_trial.duration <span class='op'>=</span> <span class='cn'>NULL</span>,
  prebc.duration <span class='op'>=</span> <span class='cn'>NULL</span>,
  bconset.message <span class='op'>=</span> <span class='cn'>NULL</span>,
  bconset.match <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>import_dir</th>
      <td><p>Folder path to raw data files</p></td>
    </tr>
    <tr>
      <th>pattern</th>
      <td><p>Pattern to look for in data files (e.g. ".txt")</p></td>
    </tr>
    <tr>
      <th>taskname</th>
      <td><p>Name of task - to be used in naming pre-processed files</p></td>
    </tr>
    <tr>
      <th>subj_prefix</th>
      <td><p>The unique pattern prefix (letter(s) and/or symbol(s))
that comes before the subject number in the data file. This is mostly
for SMI eyetrackers that are not good at including subject number
in the data and therefore the subject number needs to be determined
and extracted from the file name. If the filename is
"pitch_discrimination_19-1_001 Samples.txt" and the Subject number is
19, then the subj_prefix = "n_" because that uniquely identifies a
pattern that comes directly before the subject number in the file path.
This can also be used for EyeLink or other eyetrackers, that include a
subject number in a column in the datafile, to remove characters or
numbers in front of a subject number.</p></td>
    </tr>
    <tr>
      <th>subj_suffix</th>
      <td><p>The unique pattern suffix (letter(s) or symbol(s))
that comes after the subject number in the data file. This is mostly
for SMI eyetrackers that are not good at including subject number
in the data and therefore the subject number needs to be determined
and extracted from the file name. If the filename is
"pitch_discrimination_19-1_001 Samples.txt" and the Subject number is
19, then the subj_suffix = "-1" because that uniquely identifies a
pattern that comes directly before the subject number in the file path.
This can also be used for EyeLink or other eyetrackers, that include a
subject number in a column in the datafile, to remove characters or
numbers following (coming after) a subject number.</p></td>
    </tr>
    <tr>
      <th>timing_file</th>
      <td><p>File location and name that contains timing
information for message markers. This is only to be used if your
data does not already have message markers embedded in the raw
pupil data.</p></td>
    </tr>
    <tr>
      <th>output_dir</th>
      <td><p>Folder path to output preprocessed data to</p></td>
    </tr>
    <tr>
      <th>output_steps</th>
      <td><p>Output files for each step in preprocessing?
This creates many more data files and therefore takes up more
storage, but this can be useful if you want to analyze the data
before and after a certain preprocessing method.</p></td>
    </tr>
    <tr>
      <th>eyetracker</th>
      <td><p>The eye-tracker  used to record data. Options:
"smi", "eyelink".</p></td>
    </tr>
    <tr>
      <th>hz</th>
      <td><p>At which frequency was pupil data sampled at?
(only required for interpolation and smoothing)</p></td>
    </tr>
    <tr>
      <th>eye_use</th>
      <td><p>Which eye to use? "left" or "right"</p></td>
    </tr>
    <tr>
      <th>px_to_mm.conversion</th>
      <td><p>The conversion factor to go from
px pupil diameter to mm pupil diameter</p></td>
    </tr>
    <tr>
      <th>start_tracking.message</th>
      <td><p>Message used to mark when eyetracking
has started. For SMI eyetrackers, the default value is
"StartTracking.bmp". For EyeLink eyetrackers, the default value is
"TRIALID". For more information on how to use message markers see
https://dr-jt.github.io/pupillometry/articles/message_markers.html</p></td>
    </tr>
    <tr>
      <th>start_tracking.match</th>
      <td><p>Is the message string an "exact"
match or a partial "pattern" match?</p></td>
    </tr>
    <tr>
      <th>trial_onset.message</th>
      <td><p>Message string that marks the start of a trial.
For more information on how to use message markers see
https://dr-jt.github.io/pupillometry/articles/message_markers.html</p></td>
    </tr>
    <tr>
      <th>trial_onset.match</th>
      <td><p>Is the message string an "exact"
match or a partial "pattern" match</p></td>
    </tr>
    <tr>
      <th>deblink_extend</th>
      <td><p>How many milliseconds to extend blinks
before and after blink detection</p></td>
    </tr>
    <tr>
      <th>pretrial.duration</th>
      <td><p>Duration of pre-trial baseline period
in milliseconds</p></td>
    </tr>
    <tr>
      <th>missing_allowed</th>
      <td><p>What proportion of missing data is allowed,
on a trial-by-trial basis? If a trial exceeds this amount then it
will be removed from further preprocessing.</p></td>
    </tr>
    <tr>
      <th>interpolate</th>
      <td><p>What type of interpolation to use?
"linear" or "cubic-spline"</p></td>
    </tr>
    <tr>
      <th>interpolate.maxgap</th>
      <td><p>Maximum number of NAs to interpolate over.
Any missing data gaps over this value will not be interpolated.</p></td>
    </tr>
    <tr>
      <th>smooth</th>
      <td><p>The type of smoothing function to apply.
"hann" or "mwa" (moving window average)</p></td>
    </tr>
    <tr>
      <th>smooth.window</th>
      <td><p>Window size of smoothing function</p></td>
    </tr>
    <tr>
      <th>method_first</th>
      <td><p>Should "smooth" or "interpolate" be applied first?
It is highly suggested to apply smoothing before interpolation. See:
https://dr-jt.github.io/pupillometry/articles/smooth_interpolate_first.html</p></td>
    </tr>
    <tr>
      <th>bc</th>
      <td><p>Do you want to use "subtractive" or "divisive" baseline correction?</p></td>
    </tr>
    <tr>
      <th>pre_bc.duration</th>
      <td><p>Duration of baseline period to use that comes
before the baseline corrected period</p></td>
    </tr>
    <tr>
      <th>bc_onset.message</th>
      <td><p>Message string(s) that marks the onset of the
period to be baseline corrected.
For more information on how to use message markers see
https://dr-jt.github.io/pupillometry/articles/message_markers.html</p></td>
    </tr>
    <tr>
      <th>bc_onset.match</th>
      <td><p>Is the message string an "exact"
match or a partial "pattern" match</p></td>
    </tr>
    <tr>
      <th>include_col</th>
      <td><p>Extra columns from the raw data file to include</p></td>
    </tr>
    <tr>
      <th>trial_exclude</th>
      <td><p>Specify if there are any trials to exclude. Trial number</p></td>
    </tr>
    <tr>
      <th>files_merge</th>
      <td><p>Do you want to create a single merge output file?
TRUE or FALSE</p></td>
    </tr>
    <tr>
      <th>starttracking.message</th>
      <td><p>See start_tracking.message</p></td>
    </tr>
    <tr>
      <th>starttracking.match</th>
      <td><p>See start_tracking.match</p></td>
    </tr>
    <tr>
      <th>trialonset.message</th>
      <td><p>See trial_onset.message</p></td>
    </tr>
    <tr>
      <th>trialonset.match</th>
      <td><p>See trial_onset.match</p></td>
    </tr>
    <tr>
      <th>pre_trial.duration</th>
      <td><p>See pretrial.duration</p></td>
    </tr>
    <tr>
      <th>prebc.duration</th>
      <td><p>See pre_bc.duration</p></td>
    </tr>
    <tr>
      <th>bconset.message</th>
      <td><p>See bc_onset.duration</p></td>
    </tr>
    <tr>
      <th>bconset.match</th>
      <td><p>See bc_onset.match</p></td>
    </tr>
    </table>


  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://englelab.gatech.edu/jason'>Jason Tsukahara</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: 'API_KEY',
    indexName: 'INDEX_NAME',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


