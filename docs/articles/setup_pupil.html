<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Import and Setup • pupillometry</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Import and Setup">
<meta property="og:description" content="pupillometry">
<meta property="og:image" content="https://dr-jt.github.io/pupillometry/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pupillometry</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/preprocess_overview.html">Preprocessing Code (Template)</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Preprocessing Stages</li>
    <li>
      <a href="../articles/setup_pupil.html">Import and Setup</a>
    </li>
    <li>
      <a href="../articles/remove_unlikely.html">Remove Unlikely Values</a>
    </li>
    <li>
      <a href="../articles/preprocess_pupil.html">Preprocess</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Detailed Articles</li>
    <li>
      <a href="../articles/import_pupil.html">Import Options</a>
    </li>
    <li>
      <a href="../articles/preprocessing_options.html">Preprocessing Options</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dr-JT/pupillometry/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="setup_pupil_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Import and Setup</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dr-JT/pupillometry/blob/master/vignettes/setup_pupil.Rmd"><code>vignettes/setup_pupil.Rmd</code></a></small>
      <div class="hidden name"><code>setup_pupil.Rmd</code></div>

    </div>

    
    
<p>Importing and setting up data for preprocessing involves two steps:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Read</strong> in raw data file. <code><a href="../reference/pupil_read.html">pupil_read()</a></code></p></li>
<li><p><strong>Set Time</strong> variable relative to stimulus onset. <code><a href="../reference/set_timing.html">set_timing()</a></code></p></li>
</ol>
<div id="read-in-raw-data-file" class="section level2">
<h2 class="hasAnchor">
<a href="#read-in-raw-data-file" class="anchor"></a>1. Read in raw data file</h2>
<p>The first step is to get the data into R and format it in a way that makes working with the data easier.</p>
<p>The format and organization of your raw eye tracker data file will depend on the type of eye tracker used. Because of this, there are a lot of potential arguments that need to be specified in order to get the data properly imported with <code><a href="../reference/pupil_read.html">pupil_read()</a></code>.</p>
<p>Even though importing a data file sounds easy, this can actually become one of the more challenging steps if you do not understand how your eye tracker data files was created. You should take some time to consider:</p>
<ul>
<li><p>What eye tracker was used to collect the data</p></li>
<li><p>Which eye(s) data were collected from</p></li>
<li>
<p>What event messages from the experimental software are in the eye tracker data</p>
<ul>
<li><p>Your eye tracker data file most likely has message strings corresponding to the onset of critical events in the experiment, such as trial onset or stimulus onset. You need to know what those message strings are, in order to set the timing variable relative to the onset of one of those events and also for doing baseline correction later on.</p></li>
<li><p>onset_message: This argument in <code>set_timin()</code></p></li>
</ul>
</li>
</ul>
<p>Currently, <code><a href="../reference/pupil_read.html">pupil_read()</a></code> supports these eye trackers for easy importing:</p>
<ul>
<li>
<p>SensoMotoric Instruments (SMI) eyetrackers: <code>eyetracker = "smi"</code></p>
<ul>
<li><p>RED250m</p></li>
<li><p>Eye glasses</p></li>
</ul>
</li>
<li><p>SR Research EyeLink100 eyetrackers: <code>eyetracker = "eyelink"</code></p></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_pupil</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pupil_read.html">pupil_read</a></span><span class="op">(</span><span class="st">"folder/file.csv"</span>, eyetracker <span class="op">=</span> <span class="st">"smi"</span><span class="op">)</span>
<span class="va">data_pupil</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pupil_read.html">pupil_read</a></span><span class="op">(</span><span class="st">"folder/file.csv"</span>, eyetracker <span class="op">=</span> <span class="st">"eyelink"</span><span class="op">)</span></code></pre></div>
<p>See <code><a href="../reference/pupil_read.html">pupil_read()</a></code> for details on importing data files from other eye trackers.</p>
<div id="eye_use" class="section level4">
<h4 class="hasAnchor">
<a href="#eye_use" class="anchor"></a>eye_use</h4>
<p>If your data file contains eye tracker data for both eyes, then you need to specify which eye to use for preprocessing and analysis. This will first correlate the values between the two eyes to give you a value to report in your publication, and then remove the data for the eye that you do not want to use.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_pupil</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pupil_read.html">pupil_read</a></span><span class="op">(</span><span class="st">"folder/file.csv"</span>, eyetracker <span class="op">=</span> <span class="st">"eyelink"</span>,
                         eye_use <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span></code></pre></div>
<p>If your data file contain eye tracker data for only one eye, you can skip this argument.</p>
</div>
<div id="start_tracking_message" class="section level4">
<h4 class="hasAnchor">
<a href="#start_tracking_message" class="anchor"></a>start_tracking_message</h4>
<p>This argument in <code><a href="../reference/pupil_read.html">pupil_read()</a></code> should correspond to the message string that marks the onset of a trial. In most eye tracker APIs, you need to include a <strong>start tracking</strong> object at the beginning of every trial in the experimental software. This object by default will send a message string to the eye tracker data file. If you are using one of the supported eye trackers <strong>and</strong> did not change the default message string of the <strong>start tracking</strong> object, then you can skip this argument.</p>
<p>Alternatively, if you have a pre-trial fixation at the start of every trial you can use that message string for this argument (e.g., <code>start_tracking_message = "Fixation"</code>). You want to make sure you use a message that occurs before the onset of the critical stimulus (otherwise you will end up removing pre-stimulus / pre-trial baseline data).</p>
<p>Sometimes, experimenters will include a variable (e.g., trial number) in their message strings (e.g., “Fixation TrialID 1”). It is generally advised not to do this, but if your data was created in such a way you will need to specify that the string match be a <strong>pattern</strong> match instead of an <strong>exact</strong> match. For example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_pupil</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pupil_read.html">pupil_read</a></span><span class="op">(</span><span class="st">"folder/file.csv"</span>, eyetracker <span class="op">=</span> <span class="st">"eyelink"</span>,
                         start_tracking_message <span class="op">=</span> <span class="st">"Fixation"</span>,
                         start_tracking_match <span class="op">=</span> <span class="st">"pattern"</span><span class="op">)</span></code></pre></div>
<p>This will search for any message strings that contain the sequence of letters “Fixation”.</p>
<p>Those are the main arguments you will need to specify when importing the data. However, there are additional arguments you may need or can make importing the data more convenient. See <a href="https://dr-jt.github.io/pupillometry/articles/import_pupil.html">Import Options</a> for more details on other arguments you may need to specify to properly import the data file.</p>
</div>
</div>
<div id="set-the-time-variable-relative-to-stimulus-onset" class="section level2">
<h2 class="hasAnchor">
<a href="#set-the-time-variable-relative-to-stimulus-onset" class="anchor"></a>2. Set the time variable relative to stimulus onset</h2>
<p>The values in the <strong>Time</strong> column are not usually meaningful in the context of your experiment. Instead, what you are really interested in is the time <strong>relative</strong> to the onset of some critical stimulus in your experiment. You can easily set the <strong>Time</strong> column to be relative to the onset of a stimulus with the <code><a href="../reference/set_timing.html">set_timing()</a></code> function.</p>
<p>You may also need to specify that the message string in onset_message is a “pattern” match instead of an “exact” match.</p>
<p>For example, if you have a message string in your data that corresponds to the onset of a critical stimulus labelled as “Stimulus_Onset” you can use:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/set_timing.html">set_timing</a></span><span class="op">(</span>onset_message <span class="op">=</span> <span class="st">"Stimulus_Onset"</span>, match <span class="op">=</span> <span class="st">"exact"</span><span class="op">)</span></code></pre></div>
<p>What this will do is set Time = 0 at “Stimulus_Onset”, negative time values (e.g., Time = -10) for values between the <code>start_tracking_message</code> (e.g., “Fixation”) and “Stimulus_Onset”, and positive values (e.g., Time = 100) after “Stimulus_Onset”. It will do this for each Trial in the data file.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="http://englelab.gatech.edu/jason">Jason Tsukahara</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'API_KEY',
    indexName: 'INDEX_NAME',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
