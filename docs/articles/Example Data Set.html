<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Example Data Set • pupillometry</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Example Data Set">
<meta property="og:description" content="">
<meta property="og:image" content="https://dr-jt.github.io/pupillometry/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pupillometry</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Comparison%20of%20Preprocessing%20Methods.html">Smooth or Interpolation First?</a>
    </li>
    <li>
      <a href="../articles/Example%20Data%20Set%20without%20Message%20Markers.html">Example Data Set - Without Message Markers</a>
    </li>
    <li>
      <a href="../articles/Example%20Data%20Set.html">Example Data Set</a>
    </li>
    <li>
      <a href="../articles/Message%20Markers.html">Message Markers</a>
    </li>
    <li>
      <a href="../articles/Preprocessing%20Options.html">Preprocessing Options</a>
    </li>
    <li>
      <a href="../articles/Using%20the%20Preprocessing%20Functions.html">Using the Preprocessing Functions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dr-JT/pupillometry">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Example Data Set</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dr-JT/pupillometry/blob/master/vignettes/Example%20Data%20Set.Rmd"><code>vignettes/Example Data Set.Rmd</code></a></small>
      <div class="hidden name"><code>Example Data Set.Rmd</code></div>

    </div>

    
    
<div id="script-example-for-preprocessing-raw-data-file" class="section level3">
<h3 class="hasAnchor">
<a href="#script-example-for-preprocessing-raw-data-file" class="anchor"></a>Script example for preprocessing raw data file</h3>
<p>Download the <a href="http://englelab.gatech.edu/R/example_data/Example_Pitch.zip">Example Data Set</a> and run the script below</p>
</div>
<div id="pitch-discrimination-task" class="section level3">
<h3 class="hasAnchor">
<a href="#pitch-discrimination-task" class="anchor"></a>Pitch Discrimination Task</h3>
<p>Information about example data set:</p>
<ul>
<li><p>Raw Data Filename: “pitch_discrimination_19-1_001 Samples.txt”</p></li>
<li><p>Eyetracker: SMI Red250 Mobile recorded at 250 Hz</p></li>
<li><p>Contains message markers: Yes</p></li>
<li><p>Subject #: 19</p></li>
<li><p>Task: Pitch Discrimination</p></li>
<li><p>Trial Procedure: Fixation (Pre-trial - 3000 to 2000 ms) -&gt; Tone 1 (200 ms) -&gt; Inter-stimulus Interval (ISI - 500 ms) -&gt; Tone 2 (200 ms) -&gt; Response Screen (Until response)</p></li>
</ul>
<p>The ideal scenario is that you were able to insert message markers, that were synced to specific events in the experiment software, into the eyetracking data file itself. In this data set, that was the case. There are message markers in the data file when the trial events (stimuli) occured. A depiction of a trial procedure with message markers is given in the picture below.</p>
<p><img src="../reference/figures/pitch_trialproc_w_markers.png" align="center"></p>
<p>Each piece of the image is explained below</p>
</div>
<div id="starttracking-message" class="section level3">
<h3 class="hasAnchor">
<a href="#starttracking-message" class="anchor"></a>StartTracking Message</h3>
<p>The first message marker is the <strong>StartTracking</strong> message. It is usually more practical to start saving data right at the beginning of a trial and stop saving at the end of a trial. This results in a smaller data file (less irrelevant data) than if you were to continously save data between trials or blocks. Different eye-tracker systems have a different default <strong>StartTracking</strong> message. For SMI eye-trackers it is <strong>StartTracking.bmp</strong>. Or you can just set the argument as <em>default</em>, <code>start_tracking.message &lt;- "default"</code>.</p>
<p>In the case where you continuously saved data and do not have a <strong>StartTracking</strong> message at the start of each trial, you can use the first stimulus event (usually the pre-trial event) as the <strong>StartTracking</strong> message. For instance, in this case it would be, <code>start_tracking.message &lt;- "Fixation"</code> because there is a message labeled <strong>Fixation</strong> in the data stream at the start of every trial. But we do have a <strong>StartTracking</strong> message so we will use the default.</p>
</div>
<div id="trial-onset-message" class="section level3">
<h3 class="hasAnchor">
<a href="#trial-onset-message" class="anchor"></a>Trial Onset Message</h3>
<p>It is good practice in eye-tracking and pupillometry to have a pre-trial period before the trial actually begins. This does several things. One is that it allows the pupil response to return to normal after the previous trial (less interference from one trial to the next). Another is that research has shown the pre-trial pupil size is predictive of performance on the trial and therefore can be useful information.</p>
<p>In this pitch discrimination task, the actual duration of the pre-trial period (in which there was a central fixation on the screen) was either 3000 or 2000 ms. To define what length we want the pre-trial duration to be cutoff at in the data file we need to specify the <strong>TrialOnset</strong> message. The <strong>TrialOnset</strong> message corresponds the message marker in the data file for the first stimulus of the actual trial. In this case it is <strong>Tone 1</strong>. Therefore, we can set <code>trial_onset.message &lt;- "Tone 1"</code>. Then we can set the pretrial duration relative to this message marker. Let’s go ahead and just set it as <code>pre_trial.duration &lt;- 2000</code>.</p>
<p>In the final preprocessed data file, the Time column will be set relative to the <strong>TrialOnset</strong> message. Therefore, the start of <strong>Tone 1</strong> will have a Time of or near 0, the pre-trial phase will have a Time value of -2000 to 0, and anything after <strong>Tone 1</strong> will have a positive value.</p>
<p>There will also be a column labeled <strong>Stimulus</strong> that has a value in every row corresponding to what stimulus event that eye sample belongs to (e.g. Tone 1, ISI, Tone 2, Response Start, etc.).</p>
</div>
<div id="apply-baseline-correction" class="section level3">
<h3 class="hasAnchor">
<a href="#apply-baseline-correction" class="anchor"></a>Apply Baseline Correction</h3>
<p>If testing for the difference in pupil dilation between conditions or participants, it is important to apply some type of baseline correction.</p>
<p>First, you need to specify where you want baseline correction to start being applied to by specifiying a message marker in the data, the <strong>BC Onset</strong> message. In this case (and many cases), the <strong>BC Onset</strong> message is the same as the <strong>TrialOnset</strong> message. Therefore we can set <code>bc_onset.message &lt;- "Tone 1"</code>. You can even apply baseline correction multiple times in one trial. For instance, we could apply baseline correction at <strong>Tone 2</strong> as well if we set it as <code>bc_onset.message &lt;- c("Tone 1", "Tone 2")</code>.</p>
<p>When applying baseline correction you need to calculate the <strong>median</strong> pupil size for a certain <strong>duration</strong> before the start of the <strong>BC Onset</strong> message. For this example let’s set the duration to 200 ms, <code>pre_bc.duration &lt;- 200</code>.</p>
<p>You need to decide which type of baseline correction to apply, <strong>subtractive</strong> or <strong>divisive</strong>.</p>
<p>In the final preprocessed data file there will be a new column for baseline corrected pupil data.</p>
</div>
<div id="other-parameters" class="section level3">
<h3 class="hasAnchor">
<a href="#other-parameters" class="anchor"></a>Other Parameters</h3>
<p>Once you have the message markers all figured out you need to specify which preprocessing options you want to use.</p>
<p>For more details on the different options see the Article <a href="https://dr-jt.github.io/pupillometry/articles/Preprocessing%20Options.html">Preprocessing Options</a></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># devtools::install_github("dr-JT/pupillometry")</span></a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">library</span>(pupillometry)</a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">## Preprocessing parameters</span></a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co"># File Import Information</span></a>
<a class="sourceLine" id="cb1-8" title="8">import.dir &lt;-<span class="st"> "data/Raw"</span></a>
<a class="sourceLine" id="cb1-9" title="9">pattern &lt;-<span class="st"> "Samples.txt"</span></a>
<a class="sourceLine" id="cb1-10" title="10">taskname &lt;-<span class="st"> "Pitch_Discrimination"</span></a>
<a class="sourceLine" id="cb1-11" title="11">timing.file &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb1-12" title="12"></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="co"># Eyetrackers save the subject number information in different ways and is not</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="co"># always easy to obtain. For SMI Red250m eyetrackers this is extracted from the</span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="co"># datafile name. For SR-Research Eyelink1000 eyetrackers this is extracted from </span></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="co"># the column name with the subject ID. You need to identify a unique subj.prefix </span></a>
<a class="sourceLine" id="cb1-17" title="17"><span class="co"># pattern and subj.suffix pattern that surrounds the subject # in the </span></a>
<a class="sourceLine" id="cb1-18" title="18"><span class="co"># datafile name/subject ID column.</span></a>
<a class="sourceLine" id="cb1-19" title="19"></a>
<a class="sourceLine" id="cb1-20" title="20">subj.prefix &lt;-<span class="st"> "n_"</span></a>
<a class="sourceLine" id="cb1-21" title="21">subj.suffix &lt;-<span class="st"> "-"</span></a>
<a class="sourceLine" id="cb1-22" title="22"></a>
<a class="sourceLine" id="cb1-23" title="23"><span class="co"># File Output Information</span></a>
<a class="sourceLine" id="cb1-24" title="24">output.dir &lt;-<span class="st"> "data/Preprocessed"</span></a>
<a class="sourceLine" id="cb1-25" title="25">output.steps &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb1-26" title="26">files.merge &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb1-27" title="27"></a>
<a class="sourceLine" id="cb1-28" title="28"><span class="co"># Eyetracker Information</span></a>
<a class="sourceLine" id="cb1-29" title="29">eyetracker &lt;-<span class="st"> "smi"</span></a>
<a class="sourceLine" id="cb1-30" title="30">hz &lt;-<span class="st"> </span><span class="dv">250</span></a>
<a class="sourceLine" id="cb1-31" title="31">eye.use &lt;-<span class="st"> "left"</span></a>
<a class="sourceLine" id="cb1-32" title="32">px_to_mm.conversion &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb1-33" title="33"></a>
<a class="sourceLine" id="cb1-34" title="34"><span class="co"># Message Marker Information</span></a>
<a class="sourceLine" id="cb1-35" title="35">start_tracking.message &lt;-<span class="st"> "default"</span></a>
<a class="sourceLine" id="cb1-36" title="36">start_tracking.match &lt;-<span class="st"> "exact"</span></a>
<a class="sourceLine" id="cb1-37" title="37">trial_onset.message &lt;-<span class="st"> "Tone 1"</span></a>
<a class="sourceLine" id="cb1-38" title="38">trial_onset.match &lt;-<span class="st"> "exact"</span></a>
<a class="sourceLine" id="cb1-39" title="39">pre_trial.duration &lt;-<span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb1-40" title="40">bc_onset.message &lt;-<span class="st"> "Tone 1"</span></a>
<a class="sourceLine" id="cb1-41" title="41">bc_onset.match &lt;-<span class="st"> "exact"</span></a>
<a class="sourceLine" id="cb1-42" title="42"></a>
<a class="sourceLine" id="cb1-43" title="43"><span class="co"># Preprocessing Options</span></a>
<a class="sourceLine" id="cb1-44" title="44">deblink.extend &lt;-<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb1-45" title="45">smooth &lt;-<span class="st"> "hann"</span></a>
<a class="sourceLine" id="cb1-46" title="46">smooth.window &lt;-<span class="st"> </span><span class="dv">500</span></a>
<a class="sourceLine" id="cb1-47" title="47">interpolate &lt;-<span class="st"> "cubic-spline"</span></a>
<a class="sourceLine" id="cb1-48" title="48">interpolate.maxgap &lt;-<span class="st"> </span><span class="dv">750</span></a>
<a class="sourceLine" id="cb1-49" title="49">method.first &lt;-<span class="st"> "smooth"</span></a>
<a class="sourceLine" id="cb1-50" title="50">bc &lt;-<span class="st"> "subtractive"</span></a>
<a class="sourceLine" id="cb1-51" title="51">pre_bc.duration &lt;-<span class="st"> </span><span class="dv">200</span></a>
<a class="sourceLine" id="cb1-52" title="52">missing.allowed &lt;-<span class="st"> </span><span class="fl">.30</span></a>
<a class="sourceLine" id="cb1-53" title="53"></a>
<a class="sourceLine" id="cb1-54" title="54"><span class="co"># Misc.</span></a>
<a class="sourceLine" id="cb1-55" title="55">subset &lt;-<span class="st"> "default"</span></a>
<a class="sourceLine" id="cb1-56" title="56">trial.exclude &lt;-<span class="st"> </span><span class="kw">c</span>()</a>
<a class="sourceLine" id="cb1-57" title="57"></a>
<a class="sourceLine" id="cb1-58" title="58"><span class="co">############################</span></a>
<a class="sourceLine" id="cb1-59" title="59"></a>
<a class="sourceLine" id="cb1-60" title="60"><span class="kw"><a href="../reference/pupil_preprocess.html">pupil_preprocess</a></span>(<span class="dt">import.dir =</span> import.dir, <span class="dt">pattern =</span> pattern, <span class="dt">taskname =</span> taskname,</a>
<a class="sourceLine" id="cb1-61" title="61">                 <span class="dt">subj.prefix =</span> subj.prefix, <span class="dt">subj.suffix =</span> subj.suffix, </a>
<a class="sourceLine" id="cb1-62" title="62">                 <span class="dt">timing.file =</span> timing.file, <span class="dt">output.dir =</span> output.dir, </a>
<a class="sourceLine" id="cb1-63" title="63">                 <span class="dt">output.steps =</span> output.steps, <span class="dt">files.merge =</span> files.merge, </a>
<a class="sourceLine" id="cb1-64" title="64">                 <span class="dt">eyetracker =</span> eyetracker, <span class="dt">hz =</span> hz, <span class="dt">eye.use =</span> eye.use, </a>
<a class="sourceLine" id="cb1-65" title="65">                 <span class="dt">px_to_mm.conversion =</span> px_to_mm.conversion, </a>
<a class="sourceLine" id="cb1-66" title="66">                 <span class="dt">start_tracking.message =</span> start_tracking.message, </a>
<a class="sourceLine" id="cb1-67" title="67">                 <span class="dt">start_tracking.match =</span> start_tracking.match,</a>
<a class="sourceLine" id="cb1-68" title="68">                 <span class="dt">trial_onset.message =</span> trial_onset.message, </a>
<a class="sourceLine" id="cb1-69" title="69">                 <span class="dt">trial_onset.match =</span> trial_onset.match,</a>
<a class="sourceLine" id="cb1-70" title="70">                 <span class="dt">pre_trial.duration =</span> pre_trial.duration, </a>
<a class="sourceLine" id="cb1-71" title="71">                 <span class="dt">bc_onset.message =</span> bc_onset.message, </a>
<a class="sourceLine" id="cb1-72" title="72">                 <span class="dt">bc_onset.match =</span> bc_onset.match, </a>
<a class="sourceLine" id="cb1-73" title="73">                 <span class="dt">deblink.extend =</span> deblink.extend, </a>
<a class="sourceLine" id="cb1-74" title="74">                 <span class="dt">smooth =</span> smooth, <span class="dt">smooth.window =</span> smooth.window, </a>
<a class="sourceLine" id="cb1-75" title="75">                 <span class="dt">interpolate =</span> interpolate, </a>
<a class="sourceLine" id="cb1-76" title="76">                 <span class="dt">interpolate.maxgap =</span> interpolate.maxgap, </a>
<a class="sourceLine" id="cb1-77" title="77">                 <span class="dt">method.first =</span> method.first, <span class="dt">bc =</span> bc, </a>
<a class="sourceLine" id="cb1-78" title="78">                 <span class="dt">pre_bc.duration =</span> pre_bc.duration, </a>
<a class="sourceLine" id="cb1-79" title="79">                 <span class="dt">missing.allowed =</span> missing.allowed, <span class="dt">subset =</span> subset, </a>
<a class="sourceLine" id="cb1-80" title="80">                 <span class="dt">trial.exclude =</span> trial.exclude)</a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://englelab.gatech.edu/jason.html">Jason Tsukahara</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script>
  docsearch({
    
    
    apiKey: 'API_KEY',
    indexName: 'INDEX_NAME',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
