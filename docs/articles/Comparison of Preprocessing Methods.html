<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comparison of Preprocessing Methods • pupillometry</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Comparison of Preprocessing Methods">
<meta property="og:description" content="">
<meta property="og:image" content="https://dr-jt.github.io/pupillometry/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pupillometry</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.8.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Comparison%20of%20Preprocessing%20Methods.html">Comparison of Preprocessing Methods</a>
    </li>
    <li>
      <a href="../articles/Example%20Data%20Set.html">Example Data Set</a>
    </li>
    <li>
      <a href="../articles/Message%20Markers.html">Message Markers</a>
    </li>
    <li>
      <a href="../articles/Preprocessing%20Options.html">Preprocessing Options</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dr-JT/pupillometry">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Comparison of Preprocessing Methods</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dr-JT/pupillometry/blob/master/vignettes/Comparison%20of%20Preprocessing%20Methods.Rmd"><code>vignettes/Comparison of Preprocessing Methods.Rmd</code></a></small>
      <div class="hidden name"><code>Comparison of Preprocessing Methods.Rmd</code></div>

    </div>

    
    
<p>One question you may have is, what parameters should I specify for each preprocessing method? This can be hard to determine but it helps to have a visual aid.</p>
<div id="plot-comparison" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-comparison" class="anchor"></a><code><a href="../reference/plot.comparison.html">plot.comparison()</a></code>
</h2>
<p>With <code><a href="../reference/plot.comparison.html">plot.comparison()</a></code> you can visually compare how different preprocessing parameters change the shape of the pupil data.</p>
<p>To use <code><a href="../reference/plot.comparison.html">plot.comparison()</a></code> you first need to create the preprocessed data files with different parameters (from a single raw data file) with <code><a href="../reference/preprocess.html">preprocess()</a></code>. You may need to rename the file after running each <code><a href="../reference/preprocess.html">preprocess()</a></code> so that it doesn’t get overwritten.</p>
<p>Parameters:</p>
<ul>
<li><p><strong>import</strong>: The directory where the “test” comparison files are located</p></li>
<li><p><strong>files</strong>: A vector <code>c()</code> of the filenames to be compared</p></li>
<li><p><strong>labels</strong>: A vector <code>c()</code> of labels to use in the figure legend for each data file</p></li>
<li><p><strong>trial</strong>: Which trial to select from the data file</p></li>
<li><p><strong>title</strong>: Option to give the figure a title</p></li>
<li><p><strong>legend.title</strong>: Option to give the legend a title</p></li>
</ul>
<hr>
<hr>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>There might be many comparisons you would like to make. For visual purposes it probably is best to not display more than three time-series on a graph at one time. You should also include a time-series in which no preprocessing has been performed, that is the <code>naremoved</code> file.</p>
<p>Some comparisons you might want to make are different smoothing window sizes <code>smooth.window</code>, or different maxgap sizes <code>interpolate.maxgap</code>.</p>
<p>To make the first plot displayed below:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plot.comparison.html">plot.comparison</a></span>(<span class="dt">import =</span> <span class="st">"data/test"</span>, 
                <span class="dt">files =</span> <span class="kw">c</span>(<span class="st">"Pitch_Discrimination_19_PupilData_interpolated_cubic-spline.txt"</span>,
                          <span class="st">"Pitch_Discrimination_19_PupilData_interpolated_linear.txt"</span>,
                          <span class="st">"Pitch_Discrimination_19_PupilData_naremoved.txt"</span>),
                <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"cubic-spline"</span>,
                           <span class="st">"linear"</span>,
                           <span class="st">"No Preprocessing"</span>), 
                <span class="dt">trial =</span> <span class="dv">6</span>,
                <span class="dt">title =</span> <span class="kw">paste</span>(<span class="st">"Trial"</span>, <span class="dv">6</span>, <span class="dt">sep =</span> <span class="st">" "</span>),
                <span class="dt">legend.title =</span> <span class="st">"interpolation.type"</span>)</code></pre></div>
</div>
<div id="method-first" class="section level2">
<h2 class="hasAnchor">
<a href="#method-first" class="anchor"></a>method.first</h2>
<p>Here are some examples from <code><a href="../reference/plot.comparison.html">plot.comparison()</a></code> that demonstrate important differences when choosing whether to interpolate or smooth the data first.</p>
<p>From these examples, it can be seen that if you are gonig to apply a <code>cubic-spline</code> interpolation, then you should apply smoothing <code>smooth = TRUE</code> and it is important that you choose <code>method.first = "smooth"</code>. Otherwise the data get overly distorted if you apply interpolation first (see Trial 6).</p>
<p>These data come from a pitch discrimination task as described in the <a href="">Example Data Set</a> article. Time = 0 is the onset of the first tone.</p>
<hr>
<p>In all the figures, at some point the time-series “lines” might overlap considerably and it only looks like one color is there. In fact, all colored lines are present during those periods, they are just overlapping. If smoothing was applied, then <code>smooth.window = 500</code>.</p>
<p>On Trial 6 there is a couple of “major” gaps of missing pupil data. You can see that if you use <code>cubic-spline</code> interpolation without smoothing, then the interpolated values are exaggerated and most likely unrealistic (see the period of 0 - 500 ms). It is very unlikely that pupil size is decreasing and then increasing by over 1 mm within a 500 ms interval. It is likely that the <code>cubic-spline</code> interpolation is modeling too much high frequency noise in the data. You can see that the <code>linear</code> interpolation does not suffer from the same problem. However, if there was truly a decrease during that interval then the <code>linear</code> interpolation is not capturing that.</p>
<p><img src="../reference/figures/Trial6-interpolation.type.png" align="center"></p>
<hr>
<p>Here is the same trial but with also smoothing applied. With either <code>method.first = "smooth"</code> (green line) or <code>method.first = "interpolate"</code> (pink line). Again it is clear that, unless smoothing is applied before a <code>cubic-spline</code> interpolation, then the data may become too distorted.</p>
<p><img src="../reference/figures/Trial6--cubic-spline-hann.png" align="center"></p>
<p><br><br></p>
<hr>
<p>There is not as big of a difference for <code>linear</code> interpolation. Visually, it does still seem slightly better to apply <code>method.first = "smooth"</code> as well.</p>
<p><img src="../reference/figures/Trial6--linear-hann.png" align="center"></p>
<p><br><br></p>
<hr>
<p>And here is Trial 6 if you were to do smoothing but no interpolation</p>
<p><img src="../reference/figures/Trial6-smooth.type.png" align="center"></p>
<p><br><br></p>
<hr>
<p>Trial 2 shows a similar pattern. It seems that with larger gaps of missing data the extreme exaggeration of the <code>cubic-spline</code> interpolation gets worse.</p>
<p><img src="../reference/figures/Trial2--cubic-spline-hann.png" align="center"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#plot-comparison"><code><a href="--/reference/plot-comparison-html">plot.comparison()</a></code></a></li>
      <li><a href="#usage">Usage</a></li>
      <li><a href="#method-first">method.first</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://englelab.gatech.edu/jason.html">Jason Tsukahara</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script>
  docsearch({
    
    
    apiKey: 'API_KEY',
    indexName: 'INDEX_NAME',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
