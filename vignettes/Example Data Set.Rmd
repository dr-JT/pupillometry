---
title: "Example Data Set"
---

### Script example for preprocessing raw data file

Download the [Example Data Set](http://englelab.gatech.edu/R/example_data/Example_Pitch.zip) and run the script below

Information about example data set:

* Raw Data Filename: "pitch_discrimination_11-1_001 Samples"

* Eyetracker: SMI Red250 Mobile recorded at 250 Hz

* Subject #: 11

* Task: Pitch Discrimination

* Trial Procedure: Fixation (Pre-trial - 2000 ms) -> Tone 1 (200 ms) -> Inter-stimulus Interval (ISI - 500 ms) -> Tone 2 (200 ms) -> Response Screen (Until response)

```{r message = FALSE, warning = FALSE}
# devtools::install_github("dr-JT/pupillometry")

library(pupillometry)

## Preprocessing parameters

# File Import Information
import.dir <- "data/Raw"
pattern <- "*.txt"
taskname <- "Pitch_Discrimination"
subj.prefix <- "n_"             ## For SMI eyetrackers
subj.suffix <- "-"              ## For SMI eyetrackers

## Exporting from Be-Gaze SMI Eye-trackers, the subject id needs to be
## extracted from the file name. This is really annoying.
## subj.prefix should be a unique string pattern that occurs before the subj id
## in the file name
## subj/suffix should be a unique string pattern that occurs after the subj id
## in the file name

# File Output Information
output.dir <- "data/Preprocessed"
output.steps <- TRUE

# Eyetracker Information
eyetracker <- "smi"
hz <- 250
eye.use <- "left"

# Message Marker Information
startrecording.message <- "default"
startrecording.match <- "exact"
trialonset.message <- "Tone 1" 
trialonset.match <- "exact"
pretrial.duration <- 1000 # Intertrial interval (Fixation)
baselineoffset.message <- "Tone 1"
baselineoffset.match <- "exact"

# Preprocessing Options
deblink.extend <- 100
smooth <- "hann"
smooth.window <- 500
interpolate <- "cubic-spline"
interpolate.maxgap <- 750
method.first <- "smooth"
bc <- "subtractive"
bc.duration <- 200
missing.allowed <- .30

# Misc.
subset <- "default"
trial.exclude <- c()

############################

preprocess(import.dir = import.dir, pattern = pattern, taskname = taskname, 
           subj.prefix = subj.prefix, subj.suffix = subj.suffix, 
           output.dir = output.dir, output.steps = output.steps,
           eyetracker = eyetracker, hz = hz, eye.use = eye.use, 
           startrecording.message = startrecording.message, 
           startrecording.match = startrecording.match,
           trialonset.message = trialonset.message, 
           trialonset.match = trialonset.match,
           pretrial.duration = pretrial.duration, 
           baselineoffset.message = baselineoffset.message, 
           baselineoffset.match = baselineoffset.match,
           deblink.extend = deblink.extend, smooth = smooth,
           smooth.window = smooth.window, interpolate = interpolate, 
           interpolate.maxgap = interpolate.maxgap, method.first = method.first, 
           bc = bc, bc.duration = bc.duration, missing.allowed = missing.allowed, 
           subset = subset, trial.exclude = trial.exclude)

```

